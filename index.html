<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<meta name="description" content="AngulismoTV - Plataforma de streaming deportivo con agenda en vivo y m√∫ltiples canales">
<meta name="theme-color" content="#0b0d1b">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- Resource Hints para mejor performance -->
<!-- DNS Prefetch: Resuelve DNS antes de que se necesiten -->
<link rel="dns-prefetch" href="https://www.googletagmanager.com">
<link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">

<!-- Preconnect: Establece conexi√≥n completa temprano (m√°s potente que dns-prefetch) -->
<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>

<!-- Preload: Carga recursos cr√≠ticos con alta prioridad -->
<link rel="preload" href="assets/logo2.png" as="image" type="image/png">
<link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" as="style">

<!-- Prefetch: Pre-carga p√°ginas que el usuario probablemente visitar√° -->
<link rel="prefetch" href="multicam.html">
<link rel="prefetch" href="foro.html">
<title>AngulismoTV - Streaming Deportivo</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="shortcut icon" href="assets/logo.png" type="image/x-icon">

<!-- CSS Espacial - puto el que me robe el code-->
<link rel="stylesheet" href="css/espacial-base.css">
<link rel="stylesheet" href="css/header-unificado.css">
<link rel="stylesheet" href="css/index.css">
<link rel="stylesheet" href="css/customization-panel.css">

<!-- Google Analytics -->
<script>
  // Cargar Google Analytics de forma no bloqueante
  window.addEventListener('load', function() {
    setTimeout(function() {
      // Crear script de forma din√°mica
      var gaScript = document.createElement('script');
      gaScript.async = true;
      gaScript.src = 'https://www.googletagmanager.com/gtag/js?id=G-P2V7GWXLHJ';
      document.head.appendChild(gaScript);
      
      // Inicializar GA
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-P2V7GWXLHJ');
    }, 1500); // Espera 1.5 segundos despu√©s del load
  });
</script>
</head>

<body>
<div id="starfield">
  <div class="spiral-galaxy"></div>
  <div class="aurora aurora-1"></div>
  <div class="aurora aurora-2"></div>
</div>

<!-- HEADER UNIFICADO RESPONSIVE -->
<header class="site-header">
  <div class="header-container">
    <div class="logo-container">
      <a href="index.html" aria-label="AngulismoTV - Inicio">
        <img src="assets/logo2.png" alt="AngulismoTV" class="logo">
      </a>
    </div>
    
    <!-- Bot√≥n hamburguesa para m√≥vil -->
    <button class="menu-toggle" aria-label="Abrir men√∫ de navegaci√≥n">
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
    </button>

    <!-- Navegaci√≥n desktop (visible en pantallas grandes) -->
    <nav role="navigation" aria-label="Navegaci√≥n principal">
      <a href="#channelsSection">Canales</a>
      <a href="#agendaFrame">Agenda</a>
      <a href="multicam.html">Pantalla Dividida</a>
      <a href="https://nowevents.xyz">Entretenimiento</a>
      <a href="https://nowstats.netlify.app">Estad√≠sticas</a>
      <a href="foro.html">Foro</a>
    </nav>

    <!-- Bot√≥n de personalizaci√≥n como tuerca -->
    <button class="customize-gear" id="customizeGear" aria-label="Personalizar interfaz">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="3"/>
        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
      </svg>
    </button>
  </div>
</header>

<!-- La navegaci√≥n m√≥vil y overlay se crean autom√°ticamente con JavaScript -->

<main class="container">
  <div class="info-banner" role="note">
    El contenido de la plataforma tiene anuncios/pop-ups que no son pertenecientes a este sitio web. 
    Se recomienda el uso de <a href="https://ublockorigin.com/">uBlock Origin</a> 
    para una experiencia √≥ptima y sin interrupciones, el contenido puede BLQOUEARSE POR SU PROVEEDOR DE INTERNET, por lo tanto se recomienda
    <a href="one.one.one.one">DESCARGAR WARP 1.1.1.1</a>, disponible para PC y dispositivos mobiles. Hay opciones que se bloquean fuera de Argentina, usar VPN en ese caso. :)
  </div>

<iframe 
  src="agenda.html" 
  id="agendaFrame" 
  title="Agenda Deportiva en Vivo"
  loading="lazy"
  importance="low"
  width="100%"
  height="500"
  style="border:0;border-radius:var(--radius)">
</iframe>

  <section id="channelsSection" class="channels-section">
    <h3 class="section-title">Canales Disponibles</h3>
    <div id="channelsGrid" class="channels-grid">
      <div class="loading">Cargando canales...</div>
    </div>
  </section>
</main>

<!-- Panel de personalizaci√≥n completo -->
<div class="customize-panel" id="customizePanel">
  <div class="panel-header">
    <h2>Personalizaci√≥n</h2>
    <button class="close-panel" id="closePanel" aria-label="Cerrar panel">‚úï</button>
  </div>

  <!-- Presets r√°pidos -->
  <div class="control-group">
    <h3>‚ö° Perfiles de rendimiento</h3>
    <div class="preset-buttons">
      <button class="preset-btn" data-preset="ultra" aria-label="Calidad Ultra">
        <span class="preset-icon">üöÄ</span>
        <span class="preset-name">Ultra</span>
        <span class="preset-desc">PC potente</span>
      </button>
      <button class="preset-btn" data-preset="high" aria-label="Calidad Alta">
        <span class="preset-icon">üíé</span>
        <span class="preset-name">Alta</span>
        <span class="preset-desc">PC est√°ndar</span>
      </button>
      <button class="preset-btn" data-preset="medium" aria-label="Calidad Media">
        <span class="preset-icon">‚öôÔ∏è</span>
        <span class="preset-name">Media</span>
        <span class="preset-desc">Tablet/m√≥vil</span>
      </button>
      <button class="preset-btn active" data-preset="low" aria-label="Calidad Baja">
        <span class="preset-icon">üîã</span>
        <span class="preset-name">Ahorro</span>
        <span class="preset-desc">Bater√≠a</span>
      </button>
    </div>
  </div>

  <!-- Efectos visuales -->
  <div class="control-group">
    <h3>‚ú® Efectos visuales</h3>
    
    <div class="control-item">
      <label>
        Estrellas animadas
        <label class="toggle-switch">
          <input type="checkbox" id="starsToggle" checked>
          <span class="toggle-slider"></span>
        </label>
      </label>
    </div>

    <div class="control-item">
      <label for="starsIntensity">
        Densidad de estrellas
        <span class="value-display" id="starsValue">70</span>
      </label>
      <input type="range" id="starsIntensity" min="20" max="150" value="70" step="10">
    </div>

    <div class="control-item">
      <label>
        Estrellas fugaces
        <label class="toggle-switch">
          <input type="checkbox" id="shootingStarsToggle" checked>
          <span class="toggle-slider"></span>
        </label>
      </label>
    </div>

    <div class="control-item">
      <label>
        Cometas
        <label class="toggle-switch">
          <input type="checkbox" id="cometsToggle" checked>
          <span class="toggle-slider"></span>
        </label>
      </label>
    </div>

    <div class="control-item">
      <label>
        Planetas
        <label class="toggle-switch">
          <input type="checkbox" id="planetsToggle" checked>
          <span class="toggle-slider"></span>
        </label>
      </label>
    </div>

    <div class="control-item">
      <label>
        Auroras boreales
        <label class="toggle-switch">
          <input type="checkbox" id="aurorasToggle" checked>
          <span class="toggle-slider"></span>
        </label>
      </label>
    </div>

    <div class="control-item">
      <label>
        Galaxia espiral
        <label class="toggle-switch">
          <input type="checkbox" id="galaxyToggle" checked>
          <span class="toggle-slider"></span>
        </label>
      </label>
    </div>

    <div class="control-item">
      <label>
        Polvo estelar
        <label class="toggle-switch">
          <input type="checkbox" id="stardustToggle" checked>
          <span class="toggle-slider"></span>
        </label>
      </label>
    </div>
  </div>

  <!-- Animaciones -->
  <div class="control-group">
    <h3>üé¨ Animaciones</h3>
    
    <div class="control-item">
      <label for="animationSpeed">
        Velocidad de animaciones
        <span class="value-display" id="animSpeedValue">Normal</span>
      </label>
      <input type="range" id="animationSpeed" min="0" max="2" value="1" step="0.5">
    </div>

    <div class="control-item">
      <label>
        Efectos hover
        <label class="toggle-switch">
          <input type="checkbox" id="hoverEffectsToggle" checked>
          <span class="toggle-slider"></span>
        </label>
      </label>
    </div>

    <div class="control-item">
      <label>
        Paralaje al scroll
        <label class="toggle-switch">
          <input type="checkbox" id="parallaxToggle" checked>
          <span class="toggle-slider"></span>
        </label>
      </label>
    </div>

    <div class="control-item">
      <label>
        Part√≠culas interactivas
        <label class="toggle-switch">
          <input type="checkbox" id="particlesToggle" checked>
          <span class="toggle-slider"></span>
        </label>
      </label>
    </div>
  </div>

  <!-- Efectos de desenfoque -->
  <div class="control-group">
    <h3>üå´Ô∏è Desenfoques</h3>
    
    <div class="control-item">
      <label for="blurIntensity">
        Intensidad de blur
        <span class="value-display" id="blurValue">16px</span>
      </label>
      <input type="range" id="blurIntensity" min="0" max="30" value="16" step="2">
    </div>

    <div class="control-item">
      <label>
        Backdrop filter (header/cards)
        <label class="toggle-switch">
          <input type="checkbox" id="backdropToggle" checked>
          <span class="toggle-slider"></span>
        </label>
      </label>
    </div>
  </div>

  <!-- Transparencias -->
  <div class="control-group">
    <h3>üé® Apariencia</h3>
    
    <div class="control-item">
      <label for="bgOpacity">
        Opacidad de cards
        <span class="value-display" id="opacityValue">70%</span>
      </label>
      <input type="range" id="bgOpacity" min="30" max="100" value="70" step="5">
    </div>

    <div class="control-item">
      <label for="shadowIntensity">
        Intensidad de sombras
        <span class="value-display" id="shadowValue">100%</span>
      </label>
      <input type="range" id="shadowIntensity" min="0" max="150" value="100" step="25">
    </div>

    <div class="control-item">
      <label for="accentColor">Color de acento</label>
      <div class="color-picker-grid">
        <button class="color-option active" data-color="#72d6ff" style="background: #72d6ff;" aria-label="Cyan"></button>
        <button class="color-option" data-color="#ff7fff" style="background: #ff7fff;" aria-label="Magenta"></button>
        <button class="color-option" data-color="#4ade80" style="background: #4ade80;" aria-label="Verde"></button>
        <button class="color-option" data-color="#fbbf24" style="background: #fbbf24;" aria-label="Amarillo"></button>
        <button class="color-option" data-color="#f87171" style="background: #f87171;" aria-label="Rojo"></button>
        <button class="color-option" data-color="#a78bfa" style="background: #a78bfa;" aria-label="P√∫rpura"></button>
        <button class="color-option" data-color="#fb923c" style="background: #fb923c;" aria-label="Naranja"></button>
        <button class="color-option" data-color="#38bdf8" style="background: #38bdf8;" aria-label="Azul cielo"></button>
      </div>
    </div>
  </div>

  <!-- Rendimiento -->
  <div class="control-group">
    <h3>‚öôÔ∏è Optimizaci√≥n</h3>
    
    <div class="control-item">
      <label>
        Modo bajo consumo
        <label class="toggle-switch">
          <input type="checkbox" id="batterySaverToggle">
          <span class="toggle-slider"></span>
        </label>
      </label>
    </div>

    <div class="control-item">
      <label>
        GPU Acceleration
        <label class="toggle-switch">
          <input type="checkbox" id="gpuAccelToggle" checked>
          <span class="toggle-slider"></span>
        </label>
      </label>
    </div>

    <div class="control-item performance-info">
      <div class="info-row">
        <span>FPS estimado:</span>
        <strong id="fpsEstimate">60 FPS</strong>
      </div>
      <div class="info-row">
        <span>Elementos activos:</span>
        <strong id="activeElements">-</strong>
      </div>
    </div>
  </div>

  <!-- Acciones -->
  <div class="control-group">
    <h3>üîß Configuraci√≥n</h3>
    <button class="btn btn-primary" id="resetSettings">
      Restaurar valores por defecto
    </button>
    <button class="btn btn-secondary" id="exportSettings">
      Exportar configuraci√≥n
    </button>
    <button class="btn btn-secondary" id="importSettings">
      Importar configuraci√≥n
    </button>
  </div>
</div>

<!-- Overlay cuando el panel est√° abierto -->
<div class="panel-overlay" id="panelOverlay"></div>

<footer class="site-footer">
  <div class="container">
    <small>¬© 2025 AngulismoTV | <a href="dmca.html">DMCA</a></small>
    <small>
      <a href="https://x.com/AngulismoTV">Twitter</a> | 
      <a href="https://discord.gg/jEayDA7T">Discord</a>
    </small>
  </div>
</footer>

<script defer src="scripts/main.js"></script>
<script defer src="scripts/customization.js"></script>
<script defer src="scripts/header-mobile.js"></script>

<script>
(function() {
  'use strict';

  // Marcar body como cargado para evitar FOUC
  document.body.classList.add('loaded');

  // Detectar si es m√≥vil para optimizar
  const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

  // ==================== Starfield Generation OPTIMIZADO con Batching ====================
  const starfield = document.getElementById('starfield');
  const numStars = isMobile ? 30 : 60; // Reducido de 50/80
  const numShootingStars = isMobile ? 1 : 2; // Reducido de 2/3
  const numComets = isMobile ? 0 : 1; // Reducido de 1/2
  const numPlanets = 2;
  const numStardust = isMobile ? 15 : 30; // Reducido de 25/40
  const numConstellations = isMobile ? 0 : 1; // Reducido de 1/2
  
  const BATCH_SIZE = 10; // Crear en lotes de 10 elementos
  const BATCH_DELAY = 30; // ms entre lotes

  // Funci√≥n optimizada para crear elementos
  function createElement(className, styles = {}) {
    const el = document.createElement('div');
    el.className = className;
    Object.keys(styles).forEach(prop => {
      el.style[prop] = styles[prop];
    });
    return el;
  }

  // ==================== Crear Estrellas en Lotes ====================
  function createStarsBatch(startIdx, endIdx) {
    const fragment = document.createDocumentFragment();
    
    for (let i = startIdx; i < Math.min(endIdx, numStars); i++) {
      const layer = Math.floor(Math.random() * 3) + 1;
      const size = Math.random() * 2.5 + 0.5;
      
      const star = createElement(`star layer-${layer}`, {
        width: size + 'px',
        height: size + 'px',
        top: Math.random() * 100 + '%',
        left: Math.random() * 100 + '%',
        animationDelay: Math.random() * 4 + 's',
        animationDuration: (Math.random() * 3 + 3) + 's'
      });
      
      star.setAttribute('data-speed', layer * 0.2);
      fragment.appendChild(star);
    }
    
    starfield.appendChild(fragment);
    
    // Continuar con siguiente lote
    if (endIdx < numStars) {
      setTimeout(() => {
        createStarsBatch(endIdx, endIdx + BATCH_SIZE);
      }, BATCH_DELAY);
    } else {
      // Cuando terminamos estrellas, crear otros elementos
      createOtherElements();
    }
  }

  // ==================== Crear Otros Elementos (Shooting stars, cometas, etc) ====================
  function createOtherElements() {
    const fragment = document.createDocumentFragment();
    
    // Shooting stars
    for (let i = 0; i < numShootingStars; i++) {
      const shootingStar = createElement('shooting-star', {
        top: Math.random() * 50 + '%',
        left: (Math.random() * 50 + 50) + '%',
        animationDelay: (Math.random() * 6 + 3) + 's',
        animationDuration: (Math.random() * 3 + 3) + 's',
        width: (Math.random() * 100 + 50) + 'px'
      });
      fragment.appendChild(shootingStar);
    }

    // Cometas (solo en PC)
    if (!isMobile) {
      for (let i = 0; i < numComets; i++) {
        const comet = createElement('comet', {
          top: Math.random() * 30 + '%',
          left: (Math.random() * 30 + 70) + '%',
          animationDelay: (Math.random() * 12 + 6) + 's'
        });
        fragment.appendChild(comet);
      }
    }

    // Planetas
    for (let i = 1; i <= numPlanets; i++) {
      const planet = createElement(`planet planet-${i}`);
      fragment.appendChild(planet);
    }

    // Polvo estelar
    for (let i = 0; i < numStardust; i++) {
      const dust = createElement('stardust', {
        left: Math.random() * 100 + '%',
        bottom: '0',
        animationDelay: Math.random() * 20 + 's',
        animationDuration: (Math.random() * 10 + 15) + 's'
      });
      fragment.appendChild(dust);
    }

    starfield.appendChild(fragment);
    
    // Crear constelaciones al final (solo PC)
    if (!isMobile && numConstellations > 0) {
      setTimeout(createConstellations, 100);
    }
    
    // Cachear estrellas para paralaje
    setTimeout(cacheStars, 200);
  }

  // ==================== Crear Constelaciones ====================
  function createConstellations() {
    const fragment = document.createDocumentFragment();
    
    for (let i = 0; i < numConstellations; i++) {
      const constellation = createElement('constellation', {
        top: (Math.random() * 60 + 10) + '%',
        left: (Math.random() * 60 + 10) + '%'
      });
      
      const points = 4;
      const positions = [];
      const constellationFragment = document.createDocumentFragment();
      
      // Crear puntos
      for (let j = 0; j < points; j++) {
        const x = Math.random() * 120;
        const y = Math.random() * 120;
        const dot = createElement('constellation-dot', {
          left: x + 'px',
          top: y + 'px'
        });
        positions.push({x, y});
        constellationFragment.appendChild(dot);
      }
      
      // Crear l√≠neas
      for (let j = 0; j < points - 1; j++) {
        const dx = positions[j + 1].x - positions[j].x;
        const dy = positions[j + 1].y - positions[j].y;
        const length = Math.sqrt(dx * dx + dy * dy);
        const angle = Math.atan2(dy, dx) * 180 / Math.PI;
        
        const line = createElement('constellation-line', {
          width: length + 'px',
          left: positions[j].x + 'px',
          top: positions[j].y + 'px',
          transform: `rotate(${angle}deg)`
        });
        constellationFragment.appendChild(line);
      }
      
      constellation.appendChild(constellationFragment);
      fragment.appendChild(constellation);
    }
    
    starfield.appendChild(fragment);
  }

  // Iniciar creaci√≥n de estrellas en lotes
  createStarsBatch(0, BATCH_SIZE);

  // ==================== Efecto Paralaje OPTIMIZADO ====================
  let scrollY = 0;
  let ticking = false;
  let stars = [];

  function cacheStars() {
    stars = Array.from(document.querySelectorAll('.star'));
  }

  function updateParallax() {
    if (stars.length === 0) return;
    
    stars.forEach(star => {
      const speed = parseFloat(star.getAttribute('data-speed')) || 0;
      const yPos = scrollY * speed;
      star.style.transform = `translateY(${yPos}px)`;
    });
    ticking = false;
  }

  function handleScroll() {
    scrollY = window.pageYOffset;
    if (!ticking) {
      requestAnimationFrame(updateParallax);
      ticking = true;
    }
  }

  // Usar Intersection Observer
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        window.addEventListener('scroll', handleScroll, { passive: true });
      } else {
        window.removeEventListener('scroll', handleScroll);
      }
    });
  }, { rootMargin: '100px' });

  observer.observe(starfield);

  // ==================== Polvo Estelar Interactivo (Pool de part√≠culas) ====================
  if (!isMobile && window.matchMedia('(hover: hover)').matches) {
    let lastMouseMove = 0;
    const dustPool = [];
    const MAX_DUST_PARTICLES = 8; // Reducido de 10
    const MOUSE_THROTTLE = 150;
    
    // Pre-crear part√≠culas
    for (let i = 0; i < MAX_DUST_PARTICLES; i++) {
      const dust = createElement('stardust interactive-dust', {
        position: 'fixed',
        zIndex: '999',
        pointerEvents: 'none',
        opacity: '0'
      });
      document.body.appendChild(dust);
      dustPool.push(dust);
    }

    document.addEventListener('mousemove', function(e) {
      const now = Date.now();
      if (now - lastMouseMove < MOUSE_THROTTLE) return;
      lastMouseMove = now;
      
      if (Math.random() < 0.05 && dustPool.length > 0) {
        const dust = dustPool.pop();
        
        dust.style.left = e.clientX + 'px';
        dust.style.top = e.clientY + 'px';
        dust.style.opacity = '1';
        dust.style.animation = 'dustFloat 2s ease-out forwards';
        
        setTimeout(() => {
          dust.style.opacity = '0';
          dust.style.animation = 'none';
          dustPool.push(dust);
        }, 2000);
      }
    });
  }

  // ==================== Easter Egg: Mini Constelaci√≥n ====================
  let clickCount = 0;
  let lastClickTime = 0;
  const CLICK_TIMEOUT = 2000;

  document.addEventListener('click', function(e) {
    const now = Date.now();
    
    if (now - lastClickTime > CLICK_TIMEOUT) {
      clickCount = 0;
    }
    
    lastClickTime = now;
    clickCount++;
    
    if (clickCount === 5) {
      createMiniConstellation(e.clientX, e.clientY);
      clickCount = 0;
    }
  });

  function createMiniConstellation(x, y) {
    const miniConstellation = createElement('mini-constellation', {
      position: 'fixed',
      left: (x - 50) + 'px',
      top: (y - 50) + 'px',
      width: '100px',
      height: '100px',
      pointerEvents: 'none',
      zIndex: '9999'
    });
    
    const starFragment = document.createDocumentFragment();
    
    for (let i = 0; i < 5; i++) {
      const star = createElement('easter-egg-star', {
        position: 'absolute',
        width: '4px',
        height: '4px',
        background: 'rgba(114, 214, 255, 0.9)',
        borderRadius: '50%',
        boxShadow: '0 0 10px rgba(114, 214, 255, 0.9)',
        left: Math.random() * 80 + 10 + 'px',
        top: Math.random() * 80 + 10 + 'px',
        animation: 'twinkle 1s ease-in-out infinite'
      });
      starFragment.appendChild(star);
    }
    
    miniConstellation.appendChild(starFragment);
    document.body.appendChild(miniConstellation);
    
    setTimeout(() => {
      miniConstellation.style.transition = 'opacity 1s';
      miniConstellation.style.opacity = '0';
      setTimeout(() => {
        if (miniConstellation.parentNode) {
          miniConstellation.parentNode.removeChild(miniConstellation);
        }
      }, 1000);
    }, 3000);
  }

  // ==================== Efecto de Brillo en Match Cards (Pool de part√≠culas) ====================
  if (!isMobile && window.matchMedia('(hover: hover)').matches) {
    let hoverTimeout;
    const particlePool = [];
    const MAX_PARTICLES = 15; // Reducido de 20
    
    // Pre-crear part√≠culas
    for (let i = 0; i < MAX_PARTICLES; i++) {
      const particle = createElement('hover-particle', {
        position: 'absolute',
        width: '3px',
        height: '3px',
        background: 'rgba(114, 214, 255, 0.8)',
        borderRadius: '50%',
        boxShadow: '0 0 6px rgba(114, 214, 255, 0.8)',
        pointerEvents: 'none',
        zIndex: '10',
        opacity: '0'
      });
      particlePool.push(particle);
    }

    document.addEventListener('mouseover', function(e) {
      const card = e.target.closest('.match-card');
      if (!card) return;
      
      clearTimeout(hoverTimeout);
      hoverTimeout = setTimeout(() => {
        createHoverParticles(card);
      }, 50);
    }, true);

    document.addEventListener('mouseout', function(e) {
      clearTimeout(hoverTimeout);
    }, true);

    function createHoverParticles(card) {
      const availableParticles = particlePool.filter(p => p.style.opacity === '0');
      const numParticles = Math.min(4, availableParticles.length); // Reducido de 5
      
      for (let i = 0; i < numParticles; i++) {
        setTimeout(() => {
          const particle = availableParticles[i];
          if (!particle) return;
          
          const rect = card.getBoundingClientRect();
          const side = Math.floor(Math.random() * 4);
          let left, top;
          
          switch(side) {
            case 0: left = Math.random() * rect.width; top = 0; break;
            case 1: left = rect.width; top = Math.random() * rect.height; break;
            case 2: left = Math.random() * rect.width; top = rect.height; break;
            case 3: left = 0; top = Math.random() * rect.height; break;
          }
          
          particle.style.left = left + 'px';
          particle.style.top = top + 'px';
          particle.style.opacity = '1';
          particle.style.transform = 'scale(1)';
          particle.style.transition = 'none';
          
          if (!card.contains(particle)) {
            card.appendChild(particle);
          }
          
          requestAnimationFrame(() => {
            particle.style.transition = 'all 0.8s ease-out';
            particle.style.opacity = '0';
            particle.style.transform = 'scale(2) translateY(-20px)';
          });
          
          setTimeout(() => {
            if (particle.parentNode) {
              particle.parentNode.removeChild(particle);
            }
            particle.style.opacity = '0';
            particle.style.transform = 'scale(1)';
            particle.style.transition = 'none';
          }, 800);
          
        }, i * 100);
      }
    }
  }

  // ==================== Reducir animaciones ====================
  if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
    const animatedElements = document.querySelectorAll('.star, .shooting-star, .comet, .planet, .stardust, .aurora, .spiral-galaxy');
    animatedElements.forEach(el => {
      el.style.animation = 'none';
    });
  }

  // ==================== Cleanup ====================
  window.addEventListener('beforeunload', function() {
    window.removeEventListener('scroll', handleScroll);
    observer.disconnect();
  });

  console.log('AngulismoTV - Agenda espacial optimizada üåå');
  console.log('Easter Egg: Haz 5 clicks r√°pidos ‚ú®');

})();
</script>
</body>
</html>
