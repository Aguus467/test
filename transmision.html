<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Transmisión en Vivo - AngulismoTV Galaxia Animada</title>
<meta name="description" content="Disfruta de transmisiones en vivo de tus canales favoritos en AngulismoTV">

<!-- Meta tags optimizados para Android -->
<meta name="theme-color" content="#0b0d1b">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<link rel="icon" href="assets/logo2.png">
<style>
  * { 
    margin:0; 
    padding:0; 
    box-sizing:border-box; 
    font-family:'Inter', Arial, sans-serif; 
    -webkit-tap-highlight-color: transparent;
  }
  
  html {
    scroll-behavior: smooth;
  }
  
  body {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    color: #fff;
    overflow-x: hidden;
    position: relative;
    background: radial-gradient(circle at top, #0b0d1b, #1a1f3b, #000014);
    -webkit-overflow-scrolling: touch;
  }

  /* FONDO GALAXIA CON ESTRELLAS ANIMADAS - Optimizado para móvil */
  #starfield {
    position: fixed;
    top:0; 
    left:0;
    width:100%; 
    height:100%;
    z-index:0;
    pointer-events:none;
    overflow:hidden;
  }
  
  .star {
    position:absolute;
    background:white;
    border-radius:50%;
    opacity:0.8;
    animation-name:twinkle, moveStar;
    animation-duration: 3s, 60s;
    animation-iteration-count: infinite;
    animation-timing-function: linear;
    transform: translateZ(0); /* Aceleración GPU */
  }
  
  @keyframes twinkle {
    0%,100% { opacity:0.3; }
    50% { opacity:1; }
  }
  
  @keyframes moveStar {
    0% { transform: translate(0,0); }
    100% { transform: translate(200px,200px); }
  }

  a { 
    text-decoration:none; 
    color:#72d6ff; 
    transition:0.3s; 
  }
  
  a:hover { 
    color:#ff7fff; 
  }

  /* HEADER OPTIMIZADO PARA TOUCH */
  header {
    background: rgba(10,10,30,0.9);
    backdrop-filter: blur(6px);
    padding:12px 5%;
    display:flex;
    justify-content:space-between;
    align-items:center;
    position:sticky;
    top:0;
    z-index:1000;
    box-shadow:0 0 20px rgba(114,214,255,0.5);
    border-bottom:1px solid rgba(255,255,255,0.1);
  }
  
  .logo { 
    height:50px; 
    transition:0.3s; 
  }
  
  .logo:hover { 
    transform:scale(1.05); 
    filter:drop-shadow(0 0 12px #72d6ff); 
  }

  nav { 
    display:flex; 
    gap:15px; 
    z-index:2; 
  }
  
  nav a { 
    padding:10px 14px; 
    font-weight:600; 
    border-radius:6px; 
    background: rgba(50,50,80,0.5); 
    transition:0.3s; 
    min-height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  nav a:hover { 
    background: rgba(114,214,255,0.2); 
  }

  .options-bar {
    padding:12px 5%;
    background: rgba(30,30,60,0.7);
    border-bottom:1px solid rgba(114,214,255,0.3);
    display:flex;
    justify-content:flex-start;
    align-items:center;
    gap:12px;
    backdrop-filter: blur(6px);
    z-index:2;
    flex-wrap: wrap;
  }
  
  select, .btn {
    padding:10px 14px;
    border-radius:6px;
    border:1px solid rgba(114,214,255,0.5);
    background: rgba(20,20,40,0.8);
    color:#fff;
    font-weight:600;
    cursor:pointer;
    transition:0.3s;
    min-height: 44px;
    font-size: 16px; /* Previene zoom en iOS */
  }
  
  .btn:hover { 
    background: rgba(114,214,255,0.3); 
    color:#000; 
  }

  .container {
    width:100%;
    max-width:1200px;
    margin:0 auto;
    padding:1.5rem 1rem;
    display:grid;
    grid-template-columns:3fr 1fr;
    gap:20px;
    flex:1;
    position:relative;
    z-index:2;
  }

  .card {
    background: rgba(20,20,40,0.6);
    border-radius:12px;
    overflow:hidden;
    display:flex;
    flex-direction:column;
    box-shadow: 0 0 15px rgba(114,214,255,0.3);
    transform: translateZ(0); /* Aceleración GPU */
  }

  .card-header {
    background: rgba(40,40,70,0.8);
    padding:12px 16px;
    border-bottom:1px solid rgba(114,214,255,0.3);
    display:flex;
    align-items:center;
    gap:12px;
    min-height: 60px;
  }
  
  .channel-head {
    display: flex;
    align-items: center;
    gap: 12px;
    width: 100%;
  }
  
  .channel-head img {
    width:44px; 
    height:44px; 
    border-radius:50%;
    border:2px solid #72d6ff;
    transition:0.3s;
    flex-shrink: 0;
  }
  
  .channel-head img:hover { 
    transform:scale(1.05); 
    border-color:#ff7fff; 
  }
  
  .channel-head .name { 
    font-weight:700; 
    font-size:1rem; 
    color:#72d6ff;
    line-height: 1.3;
  }

  iframe {
    width:100%;
    flex-grow:1;
    border-radius:0 0 12px 12px;
    border:1px solid rgba(114,214,255,0.3);
    min-height: 400px;
  }

  footer.site-footer {
    background: rgba(10,10,30,0.9);
    text-align:center;
    padding:1rem 0;
    border-top:1px solid rgba(114,214,255,0.3);
    position:relative;
    z-index:2;
    margin-top: 2rem;
  }
  
  footer.site-footer small { 
    display:block; 
    color:#72d6ff; 
    margin:0.25rem 0; 
  }
  
  footer.site-footer a { 
    color:#72d6ff; 
    transition:0.3s; 
  }
  
  footer.site-footer a:hover { 
    color:#ff7fff; 
  }

  /* Estados de carga */
  .loading {
    background: linear-gradient(90deg, rgba(20,20,40,0.6) 25%, rgba(40,40,70,0.6) 50%, rgba(20,20,40,0.6) 75%);
    background-size: 200% 100%;
    animation: loading 1.5s infinite;
  }

  @keyframes loading {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }

  /* RESPONSIVE OPTIMIZADO PARA ANDROID */
  @media (max-width:1024px) { 
    .container { 
      grid-template-columns:1fr; 
    } 
  }
  
  @media (max-width:768px) {
    .container {
      padding: 1rem 0.75rem;
      gap: 15px;
    }
    
    .card-header {
      padding: 10px 12px;
    }
    
    iframe {
      min-height: 300px;
    }
  }
  
  @media (max-width:480px) {
    header { 
      flex-direction:column; 
      gap:12px; 
      padding: 10px 4%;
    }
    
    nav { 
      gap:10px; 
      flex-wrap:wrap; 
      justify-content: center;
    }
    
    nav a { 
      font-size:0.85rem; 
      padding:8px 10px; 
      min-height: 40px;
    }
    
    .options-bar { 
      flex-direction:column; 
      align-items:flex-start; 
      gap:10px; 
      padding: 10px 4%;
    }
    
    select, .btn {
      width: 100%;
      max-width: 100%;
    }
    
    .logo {
      height: 45px;
    }
    
    .container {
      padding: 1rem 0.5rem;
      gap: 12px;
    }
    
    .card-header {
      min-height: 50px;
      padding: 8px 12px;
    }
    
    .channel-head img {
      width: 36px;
      height: 36px;
    }
    
    iframe {
      min-height: 250px;
    }
  }
  
  @media (max-width:360px) {
    nav a {
      font-size: 0.8rem;
      padding: 6px 8px;
    }
    
    .container {
      padding: 1rem 0.5rem;
    }
    
    iframe {
      min-height: 220px;
    }
  }
</style>
</head>
<body>
  <div id="starfield"></div>

  <header>
    <a href="index.html"><img src="assets/logo2.png" alt="AngulismoTV" class="logo"></a>
    <nav>
      <a href="index.html#channelsSection">Canales</a>
      <a href="index.html">Agenda</a>
      <a href="multicam.html">Pantalla Dividida</a>
      <a href="https://nowevents.xyz" target="_blank">Entretenimiento</a>
      <a href="https://nowstats.netlify.app" target="_blank">Estadisticas (beta)</a>
    </nav>
  </header>

  <section class="options-bar">
    <label for="optionSelect">Transmisión:</label>
    <select id="optionSelect"></select>
    <button class="btn" id="reloadBtn">Recargar</button>
  </section>

  <main class="container">
    <section class="card player-card">
      <div class="card-header">
        <div class="channel-head" id="channel-info">
          <img id="channel-logo" src="assets/logo2.png" alt="Canal">
          <span class="name" id="channel-name">Canal en Vivo</span>
        </div>
      </div>
      <iframe id="playerFrame" allowfullscreen referrerpolicy="no-referrer" title="Reproductor"></iframe>
    </section>

    <aside class="card chat-card">
      <div class="card-header">
        <span class="name">Chat en Vivo</span>
      </div>
      <iframe id="twitchChat" src="" title="Twitch Chat" referrerpolicy="no-referrer"></iframe>
    </aside>
  </main>

  <footer class="site-footer">
    <small>© 2025 | <a href="dmca.html">DMCA</a></small>
    <small><a href="https://x.com/AngulismoTV">Twitter</a> | <a href="https://discord.gg/jEayDA7T">Discord</a></small>
  </footer>

  <script defer src="scripts/transmision.js"></script>
  <script>
    // Generar estrellas dinámicamente - Optimizado para móvil
    const starfield = document.getElementById('starfield');
    const numStars = 60; // Reducido para mejor rendimiento en móvil
    
    for(let i=0; i<numStars; i++){
      const star = document.createElement('div');
      star.className='star';
      const size = Math.random()*2 + 1;
      star.style.width = star.style.height = size+'px';
      star.style.top = Math.random()*100 + '%';
      star.style.left = Math.random()*100 + '%';
      star.style.animationDuration = (Math.random()*3+2)+'s, '+(Math.random()*50+30)+'s';
      starfield.appendChild(star);
    }

    // Optimizaciones para Android
    document.addEventListener('DOMContentLoaded', function() {
      // Mejorar experiencia táctil
      const cards = document.querySelectorAll('.card');
      cards.forEach(card => {
        card.addEventListener('touchstart', function() {
          this.style.transform = 'translateY(-1px) scale(0.99)';
        });
        
        card.addEventListener('touchend', function() {
          this.style.transform = '';
        });
      });
      
      // Prevenir zoom de doble tap
      let lastTouchEnd = 0;
      document.addEventListener('touchend', function(event) {
        const now = (new Date()).getTime();
        if (now - lastTouchEnd <= 300) {
          event.preventDefault();
        }
        lastTouchEnd = now;
      }, false);
      
      // Optimizar botones para touch
      const buttons = document.querySelectorAll('.btn, nav a');
      buttons.forEach(button => {
        button.addEventListener('touchstart', function() {
          this.style.opacity = '0.8';
        });
        
        button.addEventListener('touchend', function() {
          this.style.opacity = '1';
        });
      });
    });
  </script>
</body>
</html>